<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Gigi Ji Yeon Sung’s Workspace - Mapping Uncertainty in ACS Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Work in Progress/index.html">Work in Progress</a></li><li class="breadcrumb-item"><a href="../Work in Progress/mapping_uncertainty.html">Mapping Uncertainty in ACS Data</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/boston.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://gigisung0503.github.com" title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-globe"></i></a>
    <a href="https://github.com/gigisung0503/" title="MUSA 550 GitHub" class="quarto-navigation-tool px-1" aria-label="MUSA 550 GitHub"><i class="bi bi-github"></i></a>
    <a href="https://linkedin.com/in/gigisung" title="LinkedIn" class="quarto-navigation-tool px-1" aria-label="LinkedIn"><i class="bi bi-linkedin"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About me</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../Topical/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topical</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Topical/bos_uhi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Urban Heat Island Effect</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Topical/sovi_svi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CDC’s SVI vs HVRI’s SoVI</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../Work in Progress/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Work in Progress</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Work in Progress/mapping_uncertainty.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Mapping Uncertainty in ACS Data</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link active" data-scroll-target="#table-of-contents">Table of Contents</a></li>
  <li><a href="#american-community-survey-data-coefficients-of-variation-and-mapping-uncertainty" id="toc-american-community-survey-data-coefficients-of-variation-and-mapping-uncertainty" class="nav-link" data-scroll-target="#american-community-survey-data-coefficients-of-variation-and-mapping-uncertainty">American Community Survey Data, Coefficients of Variation, and Mapping Uncertainty</a>
  <ul class="collapse">
  <li><a href="#task-1-obtaining-census-enumeration-unit-gis-boundary-data" id="toc-task-1-obtaining-census-enumeration-unit-gis-boundary-data" class="nav-link" data-scroll-target="#task-1-obtaining-census-enumeration-unit-gis-boundary-data">Task 1: Obtaining Census Enumeration Unit GIS Boundary Data </a><a class="anchor nav-link" id="chapter1" data-scroll-target="undefined"></a></li>
  <li><a href="#task-2-obtaining-demographic-and-socioeconomic-data-tables-from-the-us-census-bureau" id="toc-task-2-obtaining-demographic-and-socioeconomic-data-tables-from-the-us-census-bureau" class="nav-link" data-scroll-target="#task-2-obtaining-demographic-and-socioeconomic-data-tables-from-the-us-census-bureau">Task 2: Obtaining Demographic and Socioeconomic Data Tables from the US Census Bureau </a><a class="anchor nav-link" id="chapter2" data-scroll-target="undefined"></a>
  <ul class="collapse">
  <li><a href="#step-1-identify-what-dataset-we-want" id="toc-step-1-identify-what-dataset-we-want" class="nav-link" data-scroll-target="#step-1-identify-what-dataset-we-want">Step 1: Identify what dataset we want</a></li>
  <li><a href="#step-2-initialize-the-api-connection" id="toc-step-2-initialize-the-api-connection" class="nav-link" data-scroll-target="#step-2-initialize-the-api-connection">Step 2: Initialize the API connection</a></li>
  <li><a href="#step-3-find-the-variables-we-want-to-load" id="toc-step-3-find-the-variables-we-want-to-load" class="nav-link" data-scroll-target="#step-3-find-the-variables-we-want-to-load">Step 3: Find the variables we want to load</a></li>
  </ul></li>
  <li><a href="#task-3-calculate-coefficients-of-variation-for-acs-data" id="toc-task-3-calculate-coefficients-of-variation-for-acs-data" class="nav-link" data-scroll-target="#task-3-calculate-coefficients-of-variation-for-acs-data">Task 3: Calculate Coefficients of Variation for ACS Data </a><a class="anchor nav-link" id="chapter3" data-scroll-target="undefined"></a></li>
  <li><a href="#task-4-categorize-census-tracts-according-to-data-quality-as-indicated-by-cvs" id="toc-task-4-categorize-census-tracts-according-to-data-quality-as-indicated-by-cvs" class="nav-link" data-scroll-target="#task-4-categorize-census-tracts-according-to-data-quality-as-indicated-by-cvs">Task 4: Categorize Census Tracts According to Data Quality as Indicated by CVs </a><a class="anchor nav-link" id="chapter4" data-scroll-target="undefined"></a></li>
  <li><a href="#task-5-join-the-file-to-the-florida-tracts-geometry" id="toc-task-5-join-the-file-to-the-florida-tracts-geometry" class="nav-link" data-scroll-target="#task-5-join-the-file-to-the-florida-tracts-geometry">Task 5: Join the File to the Florida Tracts Geometry </a><a class="anchor nav-link" id="chapter5" data-scroll-target="undefined"></a></li>
  <li><a href="#task-6-merge-the-demographic-data-with-geometries" id="toc-task-6-merge-the-demographic-data-with-geometries" class="nav-link" data-scroll-target="#task-6-merge-the-demographic-data-with-geometries">Task 6: Merge the demographic data with geometries </a><a class="anchor nav-link" id="chapter6" data-scroll-target="undefined"></a></li>
  <li><a href="#task-7-map-the-poverty-rate-data-and-include-data-quality-as-indicated-by-cvs" id="toc-task-7-map-the-poverty-rate-data-and-include-data-quality-as-indicated-by-cvs" class="nav-link" data-scroll-target="#task-7-map-the-poverty-rate-data-and-include-data-quality-as-indicated-by-cvs">Task 7: Map the Poverty Rate Data and Include Data Quality as Indicated by CVs </a><a class="anchor nav-link" id="chapter7" data-scroll-target="undefined"></a>
  <ul class="collapse">
  <li><a href="#step-1-visualize-poverty-rates" id="toc-step-1-visualize-poverty-rates" class="nav-link" data-scroll-target="#step-1-visualize-poverty-rates">Step 1: Visualize Poverty Rates</a></li>
  <li><a href="#step-2-overlay-data-quality-information" id="toc-step-2-overlay-data-quality-information" class="nav-link" data-scroll-target="#step-2-overlay-data-quality-information">Step 2: Overlay Data Quality Information</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/gigisung0503/gigisung0503.github.io.git/blob/main/Work in Progress/mapping_uncertainty.ipynb" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Work in Progress/index.html">Work in Progress</a></li><li class="breadcrumb-item"><a href="../Work in Progress/mapping_uncertainty.html">Mapping Uncertainty in ACS Data</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Mapping Uncertainty in ACS Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="table-of-contents" class="level1">
<h1>Table of Contents</h1>
<ul>
<li><p><a href="#chapter1">Task 1: Obtaining Census Enumeration Unit GIS Boundary Data</a></p></li>
<li><p><a href="#chapter2">Task 2: Obtaining Demographic and Socioeconomic Data Tables from the US Census Bureau</a></p></li>
<li><p><a href="#chapter3">Task 3: Calculate Coefficients of Variation for ACS Data</a></p></li>
<li><p><a href="#chapter4">Task 4: Categorize Census Tracts According to Data Quality as Indicated by CVs</a></p></li>
<li><p><a href="#chapter5">Task 5: Join the File to the Florida Tracts Geometry</a></p></li>
<li><p><a href="#chapter6">Task 6: Task 6: Merge the demographic data with geometries</a></p></li>
<li><p><a href="#chapter7">Task 7: Map the Poverty Rate Data and Include Data Quality as Indicated by CVs</a></p></li>
</ul>
</section>
<section id="american-community-survey-data-coefficients-of-variation-and-mapping-uncertainty" class="level1">
<h1>American Community Survey Data, Coefficients of Variation, and Mapping Uncertainty</h1>
<p>For the remainder of this course, students will be using demographic and socioeconomic data as we begin to learn how to analyze social vulnerability to hazards using GIS. In this week’s GIS assignment, we learn how/where to download socioeconomic and demographic data from the United States Census Bureau.</p>
<p>In particular, we will use five-year data estimates from the American Community Survey for 2012-2016. This survey data can be very useful for understanding sociodemographic geographies, but users should keep in mind that it is not strictly census data, even though it is collected and maintained by the US Census Bureau.</p>
<p>As the name suggests, the American Community Survey (ACS) does not count every person in every household but contains population estimates based on survey methodology which samples approximately 1 in 40 households nationwide (more in some places, far fewer in other places). Thus, the data have margins of error associated with the population estimates.</p>
<p>In this experiment exercise, we will use the ACS data at the census tract level for the entire state of Florida. Students will:</p>
<ul>
<li>Compare the differences between the US Census TIGER/LINE shapefiles and the IPUMS/NHGIS shapefile data.</li>
<li>Download ACS data from the Census Bureau.</li>
<li>Learn how to interpret margins of error and transform margins of error into coefficients of variation.</li>
<li>Learn how to visualize the population estimates and uncertainty in the data simultaneously.</li>
</ul>
<p>After reviewing and following the instructions in this Word doc, go to the assignment folder for Lab 5 where you can find the assignment Word doc and the ArcGIS Pro project file for the assignment. You will perform similar tasks for the assignment using additional variables from the American Community Survey at the census tract level for the state of Florida.</p>
<p>Abbreviations used in the exercise:</p>
<ul>
<li>MOE: Margin of Error</li>
<li>CV: Coefficient of Variation</li>
<li>SE: Standard Error</li>
</ul>
<section id="task-1-obtaining-census-enumeration-unit-gis-boundary-data" class="level2">
<h2 class="anchored" data-anchor-id="task-1-obtaining-census-enumeration-unit-gis-boundary-data">Task 1: Obtaining Census Enumeration Unit GIS Boundary Data <a class="anchor" id="chapter1"></a></h2>
</section>
<section id="task-2-obtaining-demographic-and-socioeconomic-data-tables-from-the-us-census-bureau" class="level2">
<h2 class="anchored" data-anchor-id="task-2-obtaining-demographic-and-socioeconomic-data-tables-from-the-us-census-bureau">Task 2: Obtaining Demographic and Socioeconomic Data Tables from the US Census Bureau <a class="anchor" id="chapter2"></a></h2>
<div id="cell-7" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data analysis</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># APIs</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> holoviews <span class="im">as</span> hv</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hvplot.pandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  var force = true;
  var py_version = '3.3.4'.replace('rc', '-rc.').replace('.dev', '-dev.');
  var reloading = false;
  var Bokeh = root.Bokeh;

  if (typeof (root._bokeh_timeout) === "undefined" || force) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks;
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, js_modules, js_exports, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];
    if (js_modules == null) js_modules = [];
    if (js_exports == null) js_exports = {};

    root._bokeh_onload_callbacks.push(callback);

    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls.length === 0 && js_modules.length === 0 && Object.keys(js_exports).length === 0) {
      run_callbacks();
      return null;
    }
    if (!reloading) {
      console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    }

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }
    window._bokeh_on_load = on_load

    function on_error() {
      console.error("failed to load " + url);
    }

    var skip = [];
    if (window.requirejs) {
      window.requirejs.config({'packages': {}, 'paths': {'jspanel': 'https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/jspanel', 'jspanel-modal': 'https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/modal/jspanel.modal', 'jspanel-tooltip': 'https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/tooltip/jspanel.tooltip', 'jspanel-hint': 'https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/hint/jspanel.hint', 'jspanel-layout': 'https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/layout/jspanel.layout', 'jspanel-contextmenu': 'https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/contextmenu/jspanel.contextmenu', 'jspanel-dock': 'https://cdn.jsdelivr.net/npm/jspanel4@4.12.0/dist/extensions/dock/jspanel.dock', 'gridstack': 'https://cdn.jsdelivr.net/npm/gridstack@7.2.3/dist/gridstack-all', 'notyf': 'https://cdn.jsdelivr.net/npm/notyf@3/notyf.min'}, 'shim': {'jspanel': {'exports': 'jsPanel'}, 'gridstack': {'exports': 'GridStack'}}});
      require(["jspanel"], function(jsPanel) {
    window.jsPanel = jsPanel
    on_load()
      })
      require(["jspanel-modal"], function() {
    on_load()
      })
      require(["jspanel-tooltip"], function() {
    on_load()
      })
      require(["jspanel-hint"], function() {
    on_load()
      })
      require(["jspanel-layout"], function() {
    on_load()
      })
      require(["jspanel-contextmenu"], function() {
    on_load()
      })
      require(["jspanel-dock"], function() {
    on_load()
      })
      require(["gridstack"], function(GridStack) {
    window.GridStack = GridStack
    on_load()
      })
      require(["notyf"], function() {
    on_load()
      })
      root._bokeh_is_loading = css_urls.length + 9;
    } else {
      root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length + Object.keys(js_exports).length;
    }

    var existing_stylesheets = []
    var links = document.getElementsByTagName('link')
    for (var i = 0; i < links.length; i++) {
      var link = links[i]
      if (link.href != null) {
    existing_stylesheets.push(link.href)
      }
    }
    for (var i = 0; i < css_urls.length; i++) {
      var url = css_urls[i];
      if (existing_stylesheets.indexOf(url) !== -1) {
    on_load()
    continue;
      }
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error;
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }    if (((window['jsPanel'] !== undefined) && (!(window['jsPanel'] instanceof HTMLElement))) || window.requirejs) {
      var urls = ['https://cdn.holoviz.org/panel/1.3.8/dist/bundled/floatpanel/jspanel4@4.12.0/dist/jspanel.js', 'https://cdn.holoviz.org/panel/1.3.8/dist/bundled/floatpanel/jspanel4@4.12.0/dist/extensions/modal/jspanel.modal.js', 'https://cdn.holoviz.org/panel/1.3.8/dist/bundled/floatpanel/jspanel4@4.12.0/dist/extensions/tooltip/jspanel.tooltip.js', 'https://cdn.holoviz.org/panel/1.3.8/dist/bundled/floatpanel/jspanel4@4.12.0/dist/extensions/hint/jspanel.hint.js', 'https://cdn.holoviz.org/panel/1.3.8/dist/bundled/floatpanel/jspanel4@4.12.0/dist/extensions/layout/jspanel.layout.js', 'https://cdn.holoviz.org/panel/1.3.8/dist/bundled/floatpanel/jspanel4@4.12.0/dist/extensions/contextmenu/jspanel.contextmenu.js', 'https://cdn.holoviz.org/panel/1.3.8/dist/bundled/floatpanel/jspanel4@4.12.0/dist/extensions/dock/jspanel.dock.js'];
      for (var i = 0; i < urls.length; i++) {
        skip.push(urls[i])
      }
    }    if (((window['GridStack'] !== undefined) && (!(window['GridStack'] instanceof HTMLElement))) || window.requirejs) {
      var urls = ['https://cdn.holoviz.org/panel/1.3.8/dist/bundled/gridstack/gridstack@7.2.3/dist/gridstack-all.js'];
      for (var i = 0; i < urls.length; i++) {
        skip.push(urls[i])
      }
    }    if (((window['Notyf'] !== undefined) && (!(window['Notyf'] instanceof HTMLElement))) || window.requirejs) {
      var urls = ['https://cdn.holoviz.org/panel/1.3.8/dist/bundled/notificationarea/notyf@3/notyf.min.js'];
      for (var i = 0; i < urls.length; i++) {
        skip.push(urls[i])
      }
    }    var existing_scripts = []
    var scripts = document.getElementsByTagName('script')
    for (var i = 0; i < scripts.length; i++) {
      var script = scripts[i]
      if (script.src != null) {
    existing_scripts.push(script.src)
      }
    }
    for (var i = 0; i < js_urls.length; i++) {
      var url = js_urls[i];
      if (skip.indexOf(url) !== -1 || existing_scripts.indexOf(url) !== -1) {
    if (!window.requirejs) {
      on_load();
    }
    continue;
      }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (var i = 0; i < js_modules.length; i++) {
      var url = js_modules[i];
      if (skip.indexOf(url) !== -1 || existing_scripts.indexOf(url) !== -1) {
    if (!window.requirejs) {
      on_load();
    }
    continue;
      }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (const name in js_exports) {
      var url = js_exports[name];
      if (skip.indexOf(url) >= 0 || root[name] != null) {
    if (!window.requirejs) {
      on_load();
    }
    continue;
      }
      var element = document.createElement('script');
      element.onerror = on_error;
      element.async = false;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      element.textContent = `
      import ${name} from "${url}"
      window.${name} = ${name}
      window._bokeh_on_load()
      `
      document.head.appendChild(element);
    }
    if (!js_urls.length && !js_modules.length) {
      on_load()
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  var js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.3.4.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.3.4.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.3.4.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.3.4.min.js", "https://cdn.holoviz.org/panel/1.3.8/dist/panel.min.js"];
  var js_modules = [];
  var js_exports = {};
  var css_urls = [];
  var inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {} // ensure no trailing comma for IE
  ];

  function run_inline_js() {
    if ((root.Bokeh !== undefined) || (force === true)) {
      for (var i = 0; i < inline_js.length; i++) {
    try {
          inline_js[i].call(root, root.Bokeh);
    } catch(e) {
      if (!reloading) {
        throw e;
      }
    }
      }
      // Cache old bokeh versions
      if (Bokeh != undefined && !reloading) {
    var NewBokeh = root.Bokeh;
    if (Bokeh.versions === undefined) {
      Bokeh.versions = new Map();
    }
    if (NewBokeh.version !== Bokeh.version) {
      Bokeh.versions.set(NewBokeh.version, NewBokeh)
    }
    root.Bokeh = Bokeh;
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    }
    root._bokeh_is_initializing = false
  }

  function load_or_wait() {
    // Implement a backoff loop that tries to ensure we do not load multiple
    // versions of Bokeh and its dependencies at the same time.
    // In recent versions we use the root._bokeh_is_initializing flag
    // to determine whether there is an ongoing attempt to initialize
    // bokeh, however for backward compatibility we also try to ensure
    // that we do not start loading a newer (Panel>=1.0 and Bokeh>3) version
    // before older versions are fully initialized.
    if (root._bokeh_is_initializing && Date.now() > root._bokeh_timeout) {
      root._bokeh_is_initializing = false;
      root._bokeh_onload_callbacks = undefined;
      console.log("Bokeh: BokehJS was loaded multiple times but one version failed to initialize.");
      load_or_wait();
    } else if (root._bokeh_is_initializing || (typeof root._bokeh_is_initializing === "undefined" && root._bokeh_onload_callbacks !== undefined)) {
      setTimeout(load_or_wait, 100);
    } else {
      root._bokeh_is_initializing = true
      root._bokeh_onload_callbacks = []
      var bokeh_loaded = Bokeh != null && (Bokeh.version === py_version || (Bokeh.versions !== undefined && Bokeh.versions.has(py_version)));
      if (!reloading && !bokeh_loaded) {
    root.Bokeh = undefined;
      }
      load_libs(css_urls, js_urls, js_modules, js_exports, function() {
    console.debug("Bokeh: BokehJS plotting callback run at", now());
    run_inline_js();
      });
    }
  }
  // Give older versions of the autoload script a head-start to ensure
  // they initialize before we start loading newer version.
  setTimeout(load_or_wait, 100)
}(window));
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">

if ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {
  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}
}


    function JupyterCommManager() {
    }

    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        comm_manager.register_target(comm_id, function(comm) {
          comm.on_msg(msg_handler);
        });
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
          comm.onMsg = msg_handler;
        });
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {
          var messages = comm.messages[Symbol.asyncIterator]();
          function processIteratorResult(result) {
            var message = result.value;
            console.log(message)
            var content = {data: message.data, comm_id};
            var buffers = []
            for (var buffer of message.buffers || []) {
              buffers.push(new DataView(buffer))
            }
            var metadata = message.metadata || {};
            var msg = {content, buffers, metadata}
            msg_handler(msg);
            return messages.next().then(processIteratorResult);
          }
          return messages.next().then(processIteratorResult);
        })
      }
    }

    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
      if (comm_id in window.PyViz.comms) {
        return window.PyViz.comms[comm_id];
      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
        if (msg_handler) {
          comm.on_msg(msg_handler);
        }
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
        comm.open();
        if (msg_handler) {
          comm.onMsg = msg_handler;
        }
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        var comm_promise = google.colab.kernel.comms.open(comm_id)
        comm_promise.then((comm) => {
          window.PyViz.comms[comm_id] = comm;
          if (msg_handler) {
            var messages = comm.messages[Symbol.asyncIterator]();
            function processIteratorResult(result) {
              var message = result.value;
              var content = {data: message.data};
              var metadata = message.metadata || {comm_id};
              var msg = {content, metadata}
              msg_handler(msg);
              return messages.next().then(processIteratorResult);
            }
            return messages.next().then(processIteratorResult);
          }
        }) 
        var sendClosure = (data, metadata, buffers, disposeOnDone) => {
          return comm_promise.then((comm) => {
            comm.send(data, metadata, buffers, disposeOnDone);
          });
        };
        var comm = {
          send: sendClosure
        };
      }
      window.PyViz.comms[comm_id] = comm;
      return comm;
    }
    window.PyViz.comm_manager = new JupyterCommManager();
    


var JS_MIME_TYPE = 'application/javascript';
var HTML_MIME_TYPE = 'text/html';
var EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';
var CLASS_NAME = 'output';

/**
 * Render data to the DOM node
 */
function render(props, node) {
  var div = document.createElement("div");
  var script = document.createElement("script");
  node.appendChild(div);
  node.appendChild(script);
}

/**
 * Handle when a new output is added
 */
function handle_add_output(event, handle) {
  var output_area = handle.output_area;
  var output = handle.output;
  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {
    return
  }
  var id = output.metadata[EXEC_MIME_TYPE]["id"];
  var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);
  if (id !== undefined) {
    var nchildren = toinsert.length;
    var html_node = toinsert[nchildren-1].children[0];
    html_node.innerHTML = output.data[HTML_MIME_TYPE];
    var scripts = [];
    var nodelist = html_node.querySelectorAll("script");
    for (var i in nodelist) {
      if (nodelist.hasOwnProperty(i)) {
        scripts.push(nodelist[i])
      }
    }

    scripts.forEach( function (oldScript) {
      var newScript = document.createElement("script");
      var attrs = [];
      var nodemap = oldScript.attributes;
      for (var j in nodemap) {
        if (nodemap.hasOwnProperty(j)) {
          attrs.push(nodemap[j])
        }
      }
      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });
      newScript.appendChild(document.createTextNode(oldScript.innerHTML));
      oldScript.parentNode.replaceChild(newScript, oldScript);
    });
    if (JS_MIME_TYPE in output.data) {
      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];
    }
    output_area._hv_plot_id = id;
    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {
      window.PyViz.plot_index[id] = Bokeh.index[id];
    } else {
      window.PyViz.plot_index[id] = null;
    }
  } else if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
    var bk_div = document.createElement("div");
    bk_div.innerHTML = output.data[HTML_MIME_TYPE];
    var script_attrs = bk_div.children[0].attributes;
    for (var i = 0; i < script_attrs.length; i++) {
      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);
    }
    // store reference to server id on output_area
    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
  }
}

/**
 * Handle when an output is cleared or removed
 */
function handle_clear_output(event, handle) {
  var id = handle.cell.output_area._hv_plot_id;
  var server_id = handle.cell.output_area._bokeh_server_id;
  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }
  var comm = window.PyViz.comm_manager.get_client_comm("hv-extension-comm", "hv-extension-comm", function () {});
  if (server_id !== null) {
    comm.send({event_type: 'server_delete', 'id': server_id});
    return;
  } else if (comm !== null) {
    comm.send({event_type: 'delete', 'id': id});
  }
  delete PyViz.plot_index[id];
  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {
    var doc = window.Bokeh.index[id].model.document
    doc.clear();
    const i = window.Bokeh.documents.indexOf(doc);
    if (i > -1) {
      window.Bokeh.documents.splice(i, 1);
    }
  }
}

/**
 * Handle kernel restart event
 */
function handle_kernel_cleanup(event, handle) {
  delete PyViz.comms["hv-extension-comm"];
  window.PyViz.plot_index = {}
}

/**
 * Handle update_display_data messages
 */
function handle_update_output(event, handle) {
  handle_clear_output(event, {cell: {output_area: handle.output_area}})
  handle_add_output(event, handle)
}

function register_renderer(events, OutputArea) {
  function append_mime(data, metadata, element) {
    // create a DOM node to render to
    var toinsert = this.create_output_subarea(
    metadata,
    CLASS_NAME,
    EXEC_MIME_TYPE
    );
    this.keyboard_manager.register_events(toinsert);
    // Render to node
    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
    render(props, toinsert[0]);
    element.append(toinsert);
    return toinsert
  }

  events.on('output_added.OutputArea', handle_add_output);
  events.on('output_updated.OutputArea', handle_update_output);
  events.on('clear_output.CodeCell', handle_clear_output);
  events.on('delete.Cell', handle_clear_output);
  events.on('kernel_ready.Kernel', handle_kernel_cleanup);

  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
    safe: true,
    index: 0
  });
}

if (window.Jupyter !== undefined) {
  try {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;
    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  } catch(err) {
  }
}

</script>
</div>
<div class="cell-output cell-output-display">
<style>*[data-root-id],
*[data-root-id] > * {
  box-sizing: border-box;
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));
}

/* Override VSCode background color */
.cell-output-ipywidget-background:has(
    > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]
  ),
.cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {
  background-color: transparent !important;
}
</style>
</div>
<div class="cell-output cell-output-display">
<div id="p1002">
  <div id="b72cd83f-471f-4919-a275-971af8bf6570" data-root-id="p1002" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"14250088-95e8-43bb-a9b9-e12149cd7075":{"version":"3.3.4","title":"Bokeh Application","roots":[{"type":"object","name":"panel.models.browser.BrowserInfo","id":"p1002"},{"type":"object","name":"panel.models.comm_manager.CommManager","id":"p1003","attributes":{"plot_id":"p1002","comm_id":"54907caeff114b78bb100acc1ce24b76","client_comm_id":"13a0f33f67ae49f6ae39c8d273cf13a5"}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"mode","kind":"Any","default":"warn"},{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"copy_to_clipboard1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"value","kind":"Any","default":null}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationAreaBase1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]}]}};
  var render_items = [{"docid":"14250088-95e8-43bb-a9b9-e12149cd7075","roots":{"p1002":"b72cd83f-471f-4919-a275-971af8bf6570"},"root_ids":["p1002"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  function embed_document(root) {
    var Bokeh = get_bokeh(root)
    Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
    const id_el = document.getElementById(root_id)
    if (id_el.children.length && (id_el.children[0].className === 'bk-root')) {
      const root_el = id_el.children[0]
      root_el.id = root_el.id + '-rendered'
    }
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== py_version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {
    return null
      }
      return root.Bokeh.versions.get(py_version);
    } else if (root.Bokeh.version === py_version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
      var Bokeh = get_bokeh(root)
      if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
      } else {
        console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
        embed_document(root)
      }
        }
      }
    }, 25, root)
  }
})(window);</script>
</div>
</div>
<div id="cell-8" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_columns <span class="op">=</span> <span class="dv">999</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_colwidth <span class="op">=</span> <span class="va">None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>‘cenpy’ - “Explore and download data from Census APIs”</p>
<p>Documentation: https://cenpy-devs.github.io/cenpy/</p>
<section id="step-1-identify-what-dataset-we-want" class="level3">
<h3 class="anchored" data-anchor-id="step-1-identify-what-dataset-we-want">Step 1: Identify what dataset we want</h3>
<div id="cell-11" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First step: import cenpy</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cenpy</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-12" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">### Step 1: Identify what dataset we want</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>available <span class="op">=</span> cenpy.explorer.available()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>available.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/gigisung/anaconda3/envs/eda/lib/python3.12/site-packages/cenpy/explorer.py:70: FutureWarning: DataFrame.applymap has been deprecated. Use DataFrame.map instead.
  listcols = raw_table.applymap(lambda x: isinstance(x, list)).any()</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">c_isTimeseries</th>
<th data-quarto-table-cell-role="th">c_isMicrodata</th>
<th data-quarto-table-cell-role="th">publisher</th>
<th data-quarto-table-cell-role="th">temporal</th>
<th data-quarto-table-cell-role="th">spatial</th>
<th data-quarto-table-cell-role="th">programCode</th>
<th data-quarto-table-cell-role="th">modified</th>
<th data-quarto-table-cell-role="th">keyword</th>
<th data-quarto-table-cell-role="th">contactPoint</th>
<th data-quarto-table-cell-role="th">distribution</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">bureauCode</th>
<th data-quarto-table-cell-role="th">accessLevel</th>
<th data-quarto-table-cell-role="th">title</th>
<th data-quarto-table-cell-role="th">c_isAvailable</th>
<th data-quarto-table-cell-role="th">c_isCube</th>
<th data-quarto-table-cell-role="th">c_isAggregate</th>
<th data-quarto-table-cell-role="th">c_dataset</th>
<th data-quarto-table-cell-role="th">vintage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">ABSCB2017</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2017/2017</td>
<td>US</td>
<td>006:007</td>
<td>2020-04-30 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'ASE Staff', 'hasEmail': 'mailto:erd.annual.survey.of.entrepreneurs@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2017/abscb', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The Annual Business Survey (ABS) provides information on selected economic and demographic characteristics for businesses and business owners by sex, ethnicity, race, and veteran status. Further, the survey measures research and development (for microbusinesses), new business topics such as innovation and technology, as well as other business characteristics. The U.S. Census Bureau and the National Center conduct the ABS jointly for Science and Engineering Statistics within the National Science Foundation. The ABS replaces the five-year Survey of Business Owners (SBO) for employer businesses, the Annual Survey of Entrepreneurs (ASE), the Business R&amp;D and Innovation for Microbusinesses survey (BRDI-M), and the innovation section of the Business R&amp;D and Innovation Survey (BRDI-S). https://www.census.gov/programs-surveys/abs.html</td>
<td>006:07</td>
<td>public</td>
<td>Economic Surveys: Annual Business Survey: Characteristics of Businesses</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(abscb,)</td>
<td>2017.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ABSCB2018</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2018/2018</td>
<td>US</td>
<td>006:007</td>
<td>2020-10-26 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'ASE Staff', 'hasEmail': 'mailto:Erd.annual.survey.of.entrepreneurs@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2018/abscb', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The Annual Business Survey (ABS) provides information on selected economic and demographic characteristics for businesses and business owners by sex, ethnicity, race, and veteran status. Further, the survey measures research and development (for microbusinesses), new business topics such as innovation and technology, as well as other business characteristics. The U.S. Census Bureau and the National Center conduct the ABS jointly for Science and Engineering Statistics within the National Science Foundation. The ABS replaces the five-year Survey of Business Owners (SBO) for employer businesses, the Annual Survey of Entrepreneurs (ASE), the Business R&amp;D and Innovation for Microbusinesses survey (BRDI-M), and the innovation section of the Business R&amp;D and Innovation Survey (BRDI-S). https://www.census.gov/programs-surveys/abs.html</td>
<td>006:07</td>
<td>public</td>
<td>Economic Surveys: Annual Business Survey: Characteristics of Businesses</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(abscb,)</td>
<td>2018.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ABSCB2019</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2019/2019</td>
<td>US</td>
<td>006:007</td>
<td>2021-08-17 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'ASE Staff', 'hasEmail': 'mailto:ERD.annual.survey.of.entrepreneurs@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2019/abscb', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The Annual Business Survey (ABS) provides information on selected economic and demographic characteristics for businesses and business owners by sex, ethnicity, race, and veteran status. Further, the survey measures research and development (for microbusinesses), new business topics such as innovation and technology, as well as other business characteristics. The U.S. Census Bureau and the National Center conduct the ABS jointly for Science and Engineering Statistics within the National Science Foundation. The ABS replaces the five-year Survey of Business Owners (SBO) for employer businesses, the Annual Survey of Entrepreneurs (ASE), the Business R&amp;D and Innovation for Microbusinesses survey (BRDI-M), and the innovation section of the Business R&amp;D and Innovation Survey (BRDI-S). https://www.census.gov/programs-surveys/abs.html</td>
<td>006:07</td>
<td>public</td>
<td>Economic Surveys: Annual Business Survey: Characteristics of Businesses</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(abscb,)</td>
<td>2019.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ABSCB2020</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2020/2020</td>
<td>US</td>
<td>006:007</td>
<td>2022-08-03 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'ASE Staff', 'hasEmail': 'mailto:ERD.annual.survey.of.entrepreneurs@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2020/abscb', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The Annual Business Survey (ABS) provides information on selected economic and demographic characteristics for businesses and business owners by sex, ethnicity, race, and veteran status. Further, the survey measures research and development (for microbusinesses), new business topics such as innovation and technology, as well as other business characteristics. The U.S. Census Bureau and the National Center conduct the ABS jointly for Science and Engineering Statistics within the National Science Foundation. The ABS replaces the five-year Survey of Business Owners (SBO) for employer businesses, the Annual Survey of Entrepreneurs (ASE), the Business R&amp;D and Innovation for Microbusinesses survey (BRDI-M), and the innovation section of the Business R&amp;D and Innovation Survey (BRDI-S). https://www.census.gov/programs-surveys/abs.html</td>
<td>006:07</td>
<td>public</td>
<td>Economic Surveys: Annual Business Survey: Characteristics of Businesses</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(abscb,)</td>
<td>2020.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ABSCB2021</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2021/2021</td>
<td>United States</td>
<td>006:007</td>
<td>2023-07-24 10:30:52.0</td>
<td>(census,)</td>
<td>{'fn': 'ABS Staff', 'hasEmail': 'mailto:adep.annual.business.survey@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2021/abscb', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The Annual Business Survey (ABS) provides information on selected economic and demographic characteristics for businesses and business owners by sex, ethnicity, race, and veteran status. Further, the survey measures research and development (for microbusinesses), new business topics such as innovation and technology, as well as other business characteristics. The U.S. Census Bureau and the National Center conduct the ABS jointly for Science and Engineering Statistics within the National Science Foundation. The ABS replaces the five-year Survey of Business Owners (SBO) for employer businesses, the Annual Survey of Entrepreneurs (ASE), the Business R&amp;D and Innovation for Microbusinesses survey (BRDI-M), and the innovation section of the Business R&amp;D and Innovation Survey (BRDI-S). https://www.census.gov/programs-surveys/abs.html</td>
<td>006:07</td>
<td>public</td>
<td>Economic Surveys: Annual Business Survey: Characteristics of Businesses</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(abscb,)</td>
<td>2021.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Return a dataframe of all datasets that start with "ACS"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Axis=0 means to filter the index labels!</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>acs <span class="op">=</span> available.<span class="bu">filter</span>(regex<span class="op">=</span><span class="st">"^ACS"</span>, axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>acs.sort_values(by<span class="op">=</span><span class="st">"temporal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">c_isTimeseries</th>
<th data-quarto-table-cell-role="th">c_isMicrodata</th>
<th data-quarto-table-cell-role="th">publisher</th>
<th data-quarto-table-cell-role="th">temporal</th>
<th data-quarto-table-cell-role="th">spatial</th>
<th data-quarto-table-cell-role="th">programCode</th>
<th data-quarto-table-cell-role="th">modified</th>
<th data-quarto-table-cell-role="th">keyword</th>
<th data-quarto-table-cell-role="th">contactPoint</th>
<th data-quarto-table-cell-role="th">distribution</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">bureauCode</th>
<th data-quarto-table-cell-role="th">accessLevel</th>
<th data-quarto-table-cell-role="th">title</th>
<th data-quarto-table-cell-role="th">c_isAvailable</th>
<th data-quarto-table-cell-role="th">c_isCube</th>
<th data-quarto-table-cell-role="th">c_isAggregate</th>
<th data-quarto-table-cell-role="th">c_dataset</th>
<th data-quarto-table-cell-role="th">vintage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">ACSSPP1Y2010</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2010/2010</td>
<td>United States</td>
<td>006:004</td>
<td>2020-02-13 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2010/acs/acs1/spp', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>Selected Population Profiles provide broad social, economic, and housing profiles for a large number of race, ethnic, ancestry, and country/region of birth groups. The data are presented as population counts for the total population and various subgroups and percentages.</td>
<td>006:07</td>
<td>public</td>
<td>American Community Survey: 1-Year Estimates: Selected Population Profiles 1-Year</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>(acs, acs1, spp)</td>
<td>2010.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ACSCD1132011</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2011/2011</td>
<td>United States</td>
<td>006:004</td>
<td>2014-10-06</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2011/acs1/cd113', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The American Community Survey (ACS) is a nationwide survey designed to provide communities a fresh look at how they are changing. The ACS replaced the decennial census long form in 2010 and thereafter by collecting long form type information throughout the decade rather than only once every 10 years. Questionnaires are mailed to a sample of addresses to obtain information about households -- that is, about each person and the housing unit itself. The American Community Survey produces demographic, social, housing and economic estimates in the form of 1-year, 3-year and 5-year estimates based on population thresholds. The strength of the ACS is in estimating population and housing characteristics. The 3-year data provide key estimates for each of the topic areas covered by the ACS for the nation, all 50 states, the District of Columbia, Puerto Rico, every congressional district, every metropolitan area, and all counties and places with populations of 20,000 or more. Although the ACS produces population, demographic and housing unit estimates,it is the Census Bureau's Population Estimates Program that produces and disseminates the official estimates of the population for the nation, states, counties, cities and towns, and estimates of housing units for states and counties. For 2010 and other decennial census years, the Decennial Census provides the official counts of population and housing units.</td>
<td>006:07</td>
<td>public</td>
<td>2011 American Community Survey 1-Year Profiles for the 113th Congressional Districts</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(acs1, cd113)</td>
<td>2011.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ACSLANG5Y2013</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2013/2013</td>
<td>United States</td>
<td>006:004</td>
<td>2015-09-02</td>
<td>(census,)</td>
<td>{'fn': 'Education and Social Stratification Branch', 'hasEmail': 'mailto:dsd.ferrett@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2013/language', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>This data set uses the 2009-2013 American Community Survey to tabulate the number of speakers of languages spoken at home and the number of speakers of each language who speak English less than very well. These tabulations are available for the following geographies: nation; each of the 50 states, plus Washington, D.C. and Puerto Rico; counties with 100,000 or more total population and 25,000 or more speakers of languages other than English and Spanish; core-based statistical areas (metropolitan statistical areas and micropolitan statistical areas) with 100,000 or more total population and 25,000 or more speakers of languages other than English and Spanish.</td>
<td>006:07</td>
<td>public</td>
<td>2013 American Community Survey - Table Packages: Detailed Language Spoken in the U.S.</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(language,)</td>
<td>2013.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ACSCD1152015</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2015/2015</td>
<td>United States</td>
<td>006:004</td>
<td>2017-02-10</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2015/acs1/cd115', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The American Community Survey (ACS) is an ongoing survey that provides data every year -- giving communities the current information they need to plan investments and services. The ACS covers a broad range of topics about social, economic, demographic, and housing characteristics of the U.S. population. The 115th Congressional District Data Profiles are available for the nation, all 50 states, the District of Columbia, and Puerto Rico (at large). Data profiles contain broad social, economic, housing, and demographic information. The data are presented as population counts for over 1,000 distinct variables.</td>
<td>006:07</td>
<td>public</td>
<td>2015 American Community Survey 1-Year Data Profile 115th Congressional District</td>
<td>True</td>
<td>NaN</td>
<td>True</td>
<td>(acs1, cd115)</td>
<td>2015.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ACSEEO5Y2018</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>2018/2018</td>
<td>NaN</td>
<td>006:004</td>
<td>2021-07-28 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2018/acs/acs5/eeo', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>Equal Employment Opportunity Tabulation (5-year ACS data)</td>
<td>006:07</td>
<td>public</td>
<td>American Community Survey: 5-Year Estimates: Equal Employment Opportunity 5-Year</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>(acs, acs5, eeo)</td>
<td>2018.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ACSST5Y2015</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>NaN</td>
<td>NaN</td>
<td>006:004</td>
<td>2018-06-29 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2015/acs/acs5/subject', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The American Community Survey (ACS) is an ongoing survey that provides data every year -- giving communities the current information they need to plan investments and services. The ACS covers a broad range of topics about social, economic, demographic, and housing characteristics of the U.S. population. The subject tables include the following geographies: nation, all states (including DC and Puerto Rico), all metropolitan areas, all congressional districts, all counties, all places and all tracts. Subject tables provide an overview of the estimates available in a particular topic. The data are presented as both counts and percentages. There are over 66,000 variables in this dataset.</td>
<td>006:07</td>
<td>public</td>
<td>ACS 5-Year Subject Tables</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>(acs, acs5, subject)</td>
<td>2015.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ACSST5Y2016</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>NaN</td>
<td>NaN</td>
<td>006:004</td>
<td>2018-06-29 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2016/acs/acs5/subject', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The American Community Survey (ACS) is an ongoing survey that provides data every year -- giving communities the current information they need to plan investments and services. The ACS covers a broad range of topics about social, economic, demographic, and housing characteristics of the U.S. population. The subject tables include the following geographies: nation, all states (including DC and Puerto Rico), all metropolitan areas, all congressional districts, all counties, all places and all tracts. Subject tables provide an overview of the estimates available in a particular topic. The data are presented as both counts and percentages. There are over 66,000 variables in this dataset.</td>
<td>006:07</td>
<td>public</td>
<td>ACS 5-Year Subject Tables</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>(acs, acs5, subject)</td>
<td>2016.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ACSST5Y2017</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>NaN</td>
<td>NaN</td>
<td>006:004</td>
<td>2018-10-19 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2017/acs/acs5/subject', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The American Community Survey (ACS) is an ongoing survey that provides data every year -- giving communities the current information they need to plan investments and services. The ACS covers a broad range of topics about social, economic, demographic, and housing characteristics of the U.S. population. The subject tables include the following geographies: nation, all states (including DC and Puerto Rico), all metropolitan areas, all congressional districts, all counties, all places and all tracts. Subject tables provide an overview of the estimates available in a particular topic. The data are presented as both counts and percentages. There are over 66,000 variables in this dataset.</td>
<td>006:07</td>
<td>public</td>
<td>ACS 5-Year Subject Tables</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>(acs, acs5, subject)</td>
<td>2017.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">ACSST5Y2018</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>NaN</td>
<td>NaN</td>
<td>006:004</td>
<td>2019-10-22 15:36:29.0</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:Acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2018/acs/acs5/subject', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The American Community Survey (ACS) is an ongoing survey that provides data every year -- giving communities the current information they need to plan investments and services. The ACS covers a broad range of topics about social, economic, demographic, and housing characteristics of the U.S. population. The subject tables include the following geographies: nation, all states (including DC and Puerto Rico), all metropolitan areas, all congressional districts, all counties, all places and all tracts. Subject tables provide an overview of the estimates available in a particular topic. The data are presented as both counts and percentages. There are over 66,000 variables in this dataset.</td>
<td>006:07</td>
<td>public</td>
<td>ACS 5-Year Subject Tables</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>(acs, acs5, subject)</td>
<td>2018.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ACSST5Y2019</td>
<td>NaN</td>
<td>NaN</td>
<td>U.S. Census Bureau</td>
<td>NaN</td>
<td>NaN</td>
<td>006:004</td>
<td>2020-04-03 00:00:00.0</td>
<td>(census,)</td>
<td>{'fn': 'American Community Survey Office', 'hasEmail': 'mailto:acso.users.support@census.gov'}</td>
<td>{'@type': 'dcat:Distribution', 'accessURL': 'http://api.census.gov/data/2019/acs/acs5/subject', 'description': 'API endpoint', 'format': 'API', 'mediaType': 'application/json', 'title': 'API endpoint'}</td>
<td>The American Community Survey (ACS) is an ongoing survey that provides data every year -- giving communities the current information they need to plan investments and services. The ACS covers a broad range of topics about social, economic, demographic, and housing characteristics of the U.S. population. The subject tables include the following geographies: nation, all states (including DC and Puerto Rico), all metropolitan areas, all congressional districts, all counties, all places and all tracts. Subject tables provide an overview of the estimates available in a particular topic. The data are presented as both counts and percentages. There are over 66,000 variables in this dataset.</td>
<td>006:07</td>
<td>public</td>
<td>American Community Survey: 5-Year Estimates: Subject Tables 5-Year</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>(acs, acs5, subject)</td>
<td>2019.0</td>
</tr>
</tbody>
</table>

<p>244 rows × 19 columns</p>
</div>
</div>
</div>
</div>
</section>
<section id="step-2-initialize-the-api-connection" class="level3">
<h3 class="anchored" data-anchor-id="step-2-initialize-the-api-connection">Step 2: Initialize the API connection</h3>
<div id="cell-15" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>acs <span class="op">=</span> cenpy.remote.APIConnection(<span class="st">"ACSST5Y2016"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>acs.variables.head(n<span class="op">=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">label</th>
<th data-quarto-table-cell-role="th">concept</th>
<th data-quarto-table-cell-role="th">predicateType</th>
<th data-quarto-table-cell-role="th">group</th>
<th data-quarto-table-cell-role="th">limit</th>
<th data-quarto-table-cell-role="th">predicateOnly</th>
<th data-quarto-table-cell-role="th">hasGeoCollectionSupport</th>
<th data-quarto-table-cell-role="th">attributes</th>
<th data-quarto-table-cell-role="th">required</th>
<th data-quarto-table-cell-role="th">values</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">for</td>
<td>Census API FIPS 'for' clause</td>
<td>Census API Geography Specification</td>
<td>fips-for</td>
<td>N/A</td>
<td>0</td>
<td>True</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">in</td>
<td>Census API FIPS 'in' clause</td>
<td>Census API Geography Specification</td>
<td>fips-in</td>
<td>N/A</td>
<td>0</td>
<td>True</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">ucgid</td>
<td>Uniform Census Geography Identifier clause</td>
<td>Census API Geography Specification</td>
<td>ucgid</td>
<td>N/A</td>
<td>0</td>
<td>True</td>
<td>True</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">S0804_C04_068E</td>
<td>Public transportation (excluding taxicab)!!Estimate!!Workers 16 years and over who did not work at home!!TIME ARRIVING AT WORK FROM HOME!!5:00 a.m. to 5:29 a.m.</td>
<td>MEANS OF TRANSPORTATION TO WORK BY SELECTED CHARACTERISTICS FOR WORKPLACE GEOGRAPHY</td>
<td>float</td>
<td>S0804</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>S0804_C04_068EA,S0804_C04_068M,S0804_C04_068MA</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">S0503_C02_078E</td>
<td>Foreign born; Born in Europe!!Estimate!!INDUSTRY!!Retail trade</td>
<td>SELECTED CHARACTERISTICS OF THE FOREIGN-BORN POPULATION BY REGION OF BIRTH: EUROPE</td>
<td>float</td>
<td>S0503</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>S0503_C02_078EA,S0503_C02_078M,S0503_C02_078MA</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">S0701PR_C01_028E</td>
<td>Total!!Estimate!!MARITAL STATUS!!Population 15 years and over</td>
<td>GEOGRAPHIC MOBILITY BY SELECTED CHARACTERISTICS IN PUERTO RICO</td>
<td>int</td>
<td>S0701PR</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>S0701PR_C01_028EA,S0701PR_C01_028M,S0701PR_C01_028MA</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">S0804_C04_067E</td>
<td>Public transportation (excluding taxicab)!!Estimate!!Workers 16 years and over who did not work at home!!TIME ARRIVING AT WORK FROM HOME!!12:00 a.m. to 4:59 a.m.</td>
<td>MEANS OF TRANSPORTATION TO WORK BY SELECTED CHARACTERISTICS FOR WORKPLACE GEOGRAPHY</td>
<td>float</td>
<td>S0804</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>S0804_C04_067EA,S0804_C04_067M,S0804_C04_067MA</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">S0503_C02_077E</td>
<td>Foreign born; Born in Europe!!Estimate!!INDUSTRY!!Wholesale trade</td>
<td>SELECTED CHARACTERISTICS OF THE FOREIGN-BORN POPULATION BY REGION OF BIRTH: EUROPE</td>
<td>float</td>
<td>S0503</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>S0503_C02_077EA,S0503_C02_077M,S0503_C02_077MA</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">S0701PR_C01_029E</td>
<td>Total!!Estimate!!MARITAL STATUS!!Population 15 years and over!!Never married</td>
<td>GEOGRAPHIC MOBILITY BY SELECTED CHARACTERISTICS IN PUERTO RICO</td>
<td>int</td>
<td>S0701PR</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>S0701PR_C01_029EA,S0701PR_C01_029M,S0701PR_C01_029MA</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">S0503_C02_076E</td>
<td>Foreign born; Born in Europe!!Estimate!!INDUSTRY!!Manufacturing</td>
<td>SELECTED CHARACTERISTICS OF THE FOREIGN-BORN POPULATION BY REGION OF BIRTH: EUROPE</td>
<td>float</td>
<td>S0503</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>S0503_C02_076EA,S0503_C02_076M,S0503_C02_076MA</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="step-3-find-the-variables-we-want-to-load" class="level3">
<h3 class="anchored" data-anchor-id="step-3-find-the-variables-we-want-to-load">Step 3: Find the variables we want to load</h3>
<div id="cell-17" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming 'acs' is your ACSST5Y2016 APIConnection object</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>variables <span class="op">=</span> [<span class="st">"S1701_C01_001E"</span>, <span class="st">"S1701_C01_001M"</span>, <span class="st">"S1701_C02_001E"</span>, <span class="st">"S1701_C02_001M"</span>, <span class="st">"S1701_C03_001E"</span>, <span class="st">"S1701_C03_001M"</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Florida's FIPS code is 12</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>florida_tracts <span class="op">=</span> acs.query(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    cols<span class="op">=</span>variables, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    geo_unit<span class="op">=</span><span class="st">'tract:*'</span>, </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    geo_filter<span class="op">=</span>{<span class="st">'state'</span>:<span class="st">'12'</span>}</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows of the retrieved data</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>florida_tracts.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">S1701_C01_001E</th>
<th data-quarto-table-cell-role="th">S1701_C01_001M</th>
<th data-quarto-table-cell-role="th">S1701_C02_001E</th>
<th data-quarto-table-cell-role="th">S1701_C02_001M</th>
<th data-quarto-table-cell-role="th">S1701_C03_001E</th>
<th data-quarto-table-cell-role="th">S1701_C03_001M</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2504</td>
<td>240</td>
<td>224</td>
<td>107</td>
<td>8.9</td>
<td>4.4</td>
<td>12</td>
<td>071</td>
<td>001701</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6075</td>
<td>590</td>
<td>227</td>
<td>210</td>
<td>3.7</td>
<td>3.4</td>
<td>12</td>
<td>071</td>
<td>010303</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>7342</td>
<td>1045</td>
<td>1603</td>
<td>772</td>
<td>21.8</td>
<td>9.4</td>
<td>12</td>
<td>071</td>
<td>010307</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>9873</td>
<td>788</td>
<td>1548</td>
<td>617</td>
<td>15.7</td>
<td>6.1</td>
<td>12</td>
<td>071</td>
<td>010103</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4549</td>
<td>727</td>
<td>757</td>
<td>426</td>
<td>16.6</td>
<td>8.7</td>
<td>12</td>
<td>071</td>
<td>001801</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-18" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>florida_tracts[<span class="st">'GEOID'</span>] <span class="op">=</span> florida_tracts[<span class="st">'state'</span>] <span class="op">+</span> florida_tracts[<span class="st">'county'</span>] <span class="op">+</span> florida_tracts[<span class="st">'tract'</span>]</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># florida_tracts = florida_tracts.set_index('GEOID')</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>florida_tracts.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">S1701_C01_001E</th>
<th data-quarto-table-cell-role="th">S1701_C01_001M</th>
<th data-quarto-table-cell-role="th">S1701_C02_001E</th>
<th data-quarto-table-cell-role="th">S1701_C02_001M</th>
<th data-quarto-table-cell-role="th">S1701_C03_001E</th>
<th data-quarto-table-cell-role="th">S1701_C03_001M</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
<th data-quarto-table-cell-role="th">GEOID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2504</td>
<td>240</td>
<td>224</td>
<td>107</td>
<td>8.9</td>
<td>4.4</td>
<td>12</td>
<td>071</td>
<td>001701</td>
<td>12071001701</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6075</td>
<td>590</td>
<td>227</td>
<td>210</td>
<td>3.7</td>
<td>3.4</td>
<td>12</td>
<td>071</td>
<td>010303</td>
<td>12071010303</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>7342</td>
<td>1045</td>
<td>1603</td>
<td>772</td>
<td>21.8</td>
<td>9.4</td>
<td>12</td>
<td>071</td>
<td>010307</td>
<td>12071010307</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>9873</td>
<td>788</td>
<td>1548</td>
<td>617</td>
<td>15.7</td>
<td>6.1</td>
<td>12</td>
<td>071</td>
<td>010103</td>
<td>12071010103</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4549</td>
<td>727</td>
<td>757</td>
<td>426</td>
<td>16.6</td>
<td>8.7</td>
<td>12</td>
<td>071</td>
<td>001801</td>
<td>12071001801</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-19" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">vars</span><span class="op">=</span>[<span class="st">'S1701_C01_001'</span>,<span class="st">'S1701_C02_001'</span>,<span class="st">'S1701_C03_001'</span>]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">vars</span>:</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">E"</span>] <span class="op">=</span> florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">E"</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">M"</span>] <span class="op">=</span> florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">M"</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>florida_tracts.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 4245 entries, 0 to 4244
Data columns (total 10 columns):
 #   Column          Non-Null Count  Dtype  
---  ------          --------------  -----  
 0   S1701_C01_001E  4245 non-null   float64
 1   S1701_C01_001M  4245 non-null   float64
 2   S1701_C02_001E  4245 non-null   float64
 3   S1701_C02_001M  4245 non-null   float64
 4   S1701_C03_001E  4245 non-null   float64
 5   S1701_C03_001M  4245 non-null   float64
 6   state           4245 non-null   object 
 7   county          4245 non-null   object 
 8   tract           4245 non-null   object 
 9   GEOID           4245 non-null   object 
dtypes: float64(6), object(4)
memory usage: 331.8+ KB</code></pre>
</div>
</div>
<div id="cell-20" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>florida_tracts.sort_values(by<span class="op">=</span><span class="st">'S1701_C01_001E'</span>,ascending<span class="op">=</span><span class="va">True</span>).head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">S1701_C01_001E</th>
<th data-quarto-table-cell-role="th">S1701_C01_001M</th>
<th data-quarto-table-cell-role="th">S1701_C02_001E</th>
<th data-quarto-table-cell-role="th">S1701_C02_001M</th>
<th data-quarto-table-cell-role="th">S1701_C03_001E</th>
<th data-quarto-table-cell-role="th">S1701_C03_001M</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
<th data-quarto-table-cell-role="th">GEOID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">4188</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>127</td>
<td>990000</td>
<td>12127990000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1233</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>099</td>
<td>980200</td>
<td>12099980200</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1234</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>099</td>
<td>980400</td>
<td>12099980400</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1235</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>099</td>
<td>980500</td>
<td>12099980500</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2100</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>031</td>
<td>990000</td>
<td>12031990000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2099</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>099</td>
<td>980100</td>
<td>12099980100</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1615</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>029</td>
<td>990000</td>
<td>12029990000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1236</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>099</td>
<td>990000</td>
<td>12099990000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1237</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>099</td>
<td>990100</td>
<td>12099990100</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2644</td>
<td>0.0</td>
<td>13.0</td>
<td>0.0</td>
<td>13.0</td>
<td>-666666666.0</td>
<td>-222222222.0</td>
<td>12</td>
<td>091</td>
<td>990200</td>
<td>12091990200</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-21" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>variables <span class="op">=</span> [<span class="st">"S1701_C01_001E"</span>, <span class="st">"S1701_C01_001M"</span>, <span class="st">"S1701_C02_001E"</span>, <span class="st">"S1701_C02_001M"</span>, <span class="st">"S1701_C03_001E"</span>, <span class="st">"S1701_C03_001M"</span>]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> variables:</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    florida_tracts[i] <span class="op">=</span> florida_tracts[i].replace(<span class="dv">0</span>, np.nan)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>florida_tracts.sort_values(by<span class="op">=</span><span class="st">'S1701_C01_001E'</span>,ascending<span class="op">=</span><span class="va">True</span>).head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">S1701_C01_001E</th>
<th data-quarto-table-cell-role="th">S1701_C01_001M</th>
<th data-quarto-table-cell-role="th">S1701_C02_001E</th>
<th data-quarto-table-cell-role="th">S1701_C02_001M</th>
<th data-quarto-table-cell-role="th">S1701_C03_001E</th>
<th data-quarto-table-cell-role="th">S1701_C03_001M</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
<th data-quarto-table-cell-role="th">GEOID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">466</td>
<td>4.0</td>
<td>9.0</td>
<td>4.0</td>
<td>9.0</td>
<td>100.0</td>
<td>100.0</td>
<td>12</td>
<td>087</td>
<td>980100</td>
<td>12087980100</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">193</td>
<td>6.0</td>
<td>9.0</td>
<td>4.0</td>
<td>6.0</td>
<td>66.7</td>
<td>66.7</td>
<td>12</td>
<td>073</td>
<td>001300</td>
<td>12073001300</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">465</td>
<td>7.0</td>
<td>11.0</td>
<td>NaN</td>
<td>13.0</td>
<td>NaN</td>
<td>100.0</td>
<td>12</td>
<td>087</td>
<td>980000</td>
<td>12087980000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2439</td>
<td>7.0</td>
<td>11.0</td>
<td>7.0</td>
<td>11.0</td>
<td>100.0</td>
<td>100.0</td>
<td>12</td>
<td>086</td>
<td>008904</td>
<td>12086008904</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3313</td>
<td>12.0</td>
<td>18.0</td>
<td>NaN</td>
<td>13.0</td>
<td>NaN</td>
<td>95.0</td>
<td>12</td>
<td>119</td>
<td>980000</td>
<td>12119980000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1858</td>
<td>16.0</td>
<td>24.0</td>
<td>NaN</td>
<td>13.0</td>
<td>NaN</td>
<td>82.3</td>
<td>12</td>
<td>057</td>
<td>980500</td>
<td>12057980500</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2387</td>
<td>23.0</td>
<td>28.0</td>
<td>NaN</td>
<td>13.0</td>
<td>NaN</td>
<td>68.6</td>
<td>12</td>
<td>119</td>
<td>911000</td>
<td>12119911000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2810</td>
<td>25.0</td>
<td>18.0</td>
<td>NaN</td>
<td>13.0</td>
<td>NaN</td>
<td>65.8</td>
<td>12</td>
<td>055</td>
<td>980000</td>
<td>12055980000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3431</td>
<td>32.0</td>
<td>52.0</td>
<td>32.0</td>
<td>52.0</td>
<td>100.0</td>
<td>58.2</td>
<td>12</td>
<td>105</td>
<td>980000</td>
<td>12105980000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3388</td>
<td>38.0</td>
<td>18.0</td>
<td>6.0</td>
<td>6.0</td>
<td>15.8</td>
<td>18.9</td>
<td>12</td>
<td>001</td>
<td>000902</td>
<td>12001000902</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-22" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(florida_tracts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>pandas.core.frame.DataFrame</code></pre>
</div>
</div>
<div id="cell-23" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>florida_tracts.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>S1701_C01_001E    81
S1701_C01_001M     0
S1701_C02_001E    87
S1701_C02_001M     0
S1701_C03_001E     6
S1701_C03_001M     0
state              0
county             0
tract              0
GEOID              0
dtype: int64</code></pre>
</div>
</div>
</section>
</section>
<section id="task-3-calculate-coefficients-of-variation-for-acs-data" class="level2">
<h2 class="anchored" data-anchor-id="task-3-calculate-coefficients-of-variation-for-acs-data">Task 3: Calculate Coefficients of Variation for ACS Data <a class="anchor" id="chapter3"></a></h2>
<p>To calculate the Standard Error (SE) and Coefficient of Variation (CV) for the variables of interest from the American Community Survey (ACS) data, we use the following formulas:</p>
<ul>
<li>The Standard Error (SE) can be derived from the Margin of Error (MOE) provided for each estimate. The ACS provides MOE at a 90% confidence level, which is approximately 1.645 times the standard error. Therefore, the formula to calculate the SE from the MOE is:</li>
</ul>
<p><span class="math display">\[
SE = \frac{MOE}{1.645}
\]</span></p>
<ul>
<li>The Coefficient of Variation (CV) is a measure of relative variability and is calculated as the ratio of the standard error (SE) to the estimate itself, expressed as a percentage. The formula for CV is:</li>
</ul>
<p><span class="math display">\[
CV = \left( \frac{SE}{Estimate} \right) \times 100
\]</span></p>
<p>For each variable of interest, we apply these formulas. Let’s take the variable <code>S1701_C01_001E</code> (Estimate) and its corresponding margin of error <code>S1701_C01_001M</code> (MOE) as an example:</p>
<ol type="1">
<li>First, calculate the Standard Error (SE) for <code>S1701_C01_001E</code>:</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>florida_tracts[<span class="st">'S1701_C01_001E_SE'</span>] <span class="op">=</span> florida_tracts[<span class="st">'S1701_C01_001M'</span>] <span class="op">/</span> <span class="fl">1.645</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Then, calculate the Coefficient of Variation (CV) for S1701_C01_001E:</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>florida_tracts[<span class="st">'S1701_C01_001E_CV'</span>] <span class="op">=</span> (florida_tracts[<span class="st">'S1701_C01_001E_SE'</span>] <span class="op">/</span> florida_tracts[<span class="st">'S1701_C01_001E'</span>]) <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>Repeat these steps for all the variables of interest.</li>
</ol>
<div id="cell-26" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>florida_tracts.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 4245 entries, 0 to 4244
Data columns (total 10 columns):
 #   Column          Non-Null Count  Dtype  
---  ------          --------------  -----  
 0   S1701_C01_001E  4164 non-null   float64
 1   S1701_C01_001M  4245 non-null   float64
 2   S1701_C02_001E  4158 non-null   float64
 3   S1701_C02_001M  4245 non-null   float64
 4   S1701_C03_001E  4239 non-null   float64
 5   S1701_C03_001M  4245 non-null   float64
 6   state           4245 non-null   object 
 7   county          4245 non-null   object 
 8   tract           4245 non-null   object 
 9   GEOID           4245 non-null   object 
dtypes: float64(6), object(4)
memory usage: 331.8+ KB</code></pre>
</div>
</div>
<div id="cell-27" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">vars</span><span class="op">=</span>[<span class="st">'S1701_C01_001'</span>,<span class="st">'S1701_C02_001'</span>,<span class="st">'S1701_C03_001'</span>]</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">vars</span>:</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_SE"</span>] <span class="op">=</span> florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">M"</span>] <span class="op">/</span> <span class="fl">1.645</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_CV"</span>] <span class="op">=</span> florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_SE"</span>] <span class="op">/</span> florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">E"</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>florida_tracts.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">S1701_C01_001E</th>
<th data-quarto-table-cell-role="th">S1701_C01_001M</th>
<th data-quarto-table-cell-role="th">S1701_C02_001E</th>
<th data-quarto-table-cell-role="th">S1701_C02_001M</th>
<th data-quarto-table-cell-role="th">S1701_C03_001E</th>
<th data-quarto-table-cell-role="th">S1701_C03_001M</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">S1701_C01_001_SE</th>
<th data-quarto-table-cell-role="th">S1701_C01_001_CV</th>
<th data-quarto-table-cell-role="th">S1701_C02_001_SE</th>
<th data-quarto-table-cell-role="th">S1701_C02_001_CV</th>
<th data-quarto-table-cell-role="th">S1701_C03_001_SE</th>
<th data-quarto-table-cell-role="th">S1701_C03_001_CV</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2504.0</td>
<td>240.0</td>
<td>224.0</td>
<td>107.0</td>
<td>8.9</td>
<td>4.4</td>
<td>12</td>
<td>071</td>
<td>001701</td>
<td>12071001701</td>
<td>145.896657</td>
<td>5.826544</td>
<td>65.045593</td>
<td>29.038211</td>
<td>2.674772</td>
<td>30.053618</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6075.0</td>
<td>590.0</td>
<td>227.0</td>
<td>210.0</td>
<td>3.7</td>
<td>3.4</td>
<td>12</td>
<td>071</td>
<td>010303</td>
<td>12071010303</td>
<td>358.662614</td>
<td>5.903911</td>
<td>127.659574</td>
<td>56.237698</td>
<td>2.066869</td>
<td>55.861332</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>7342.0</td>
<td>1045.0</td>
<td>1603.0</td>
<td>772.0</td>
<td>21.8</td>
<td>9.4</td>
<td>12</td>
<td>071</td>
<td>010307</td>
<td>12071010307</td>
<td>635.258359</td>
<td>8.652388</td>
<td>469.300912</td>
<td>29.276414</td>
<td>5.714286</td>
<td>26.212320</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>9873.0</td>
<td>788.0</td>
<td>1548.0</td>
<td>617.0</td>
<td>15.7</td>
<td>6.1</td>
<td>12</td>
<td>071</td>
<td>010103</td>
<td>12071010103</td>
<td>479.027356</td>
<td>4.851893</td>
<td>375.075988</td>
<td>24.229715</td>
<td>3.708207</td>
<td>23.619151</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4549.0</td>
<td>727.0</td>
<td>757.0</td>
<td>426.0</td>
<td>16.6</td>
<td>8.7</td>
<td>12</td>
<td>071</td>
<td>001801</td>
<td>12071001801</td>
<td>441.945289</td>
<td>9.715218</td>
<td>258.966565</td>
<td>34.209586</td>
<td>5.288754</td>
<td>31.859963</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-28" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>florida_tracts.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 4245 entries, 0 to 4244
Data columns (total 16 columns):
 #   Column            Non-Null Count  Dtype  
---  ------            --------------  -----  
 0   S1701_C01_001E    4245 non-null   float64
 1   S1701_C01_001M    4245 non-null   float64
 2   S1701_C02_001E    4245 non-null   float64
 3   S1701_C02_001M    4245 non-null   float64
 4   S1701_C03_001E    4245 non-null   float64
 5   S1701_C03_001M    4245 non-null   float64
 6   state             4245 non-null   object 
 7   county            4245 non-null   object 
 8   tract             4245 non-null   object 
 9   GEOID             4245 non-null   object 
 10  S1701_C01_001_SE  4245 non-null   float64
 11  S1701_C01_001_CV  4245 non-null   float64
 12  S1701_C02_001_SE  4245 non-null   float64
 13  S1701_C02_001_CV  4245 non-null   float64
 14  S1701_C03_001_SE  4245 non-null   float64
 15  S1701_C03_001_CV  4245 non-null   float64
dtypes: float64(12), object(4)
memory usage: 530.8+ KB</code></pre>
</div>
</div>
<div id="cell-29" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>florida_tracts.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>S1701_C01_001E      81
S1701_C01_001M       0
S1701_C02_001E      87
S1701_C02_001M       0
S1701_C03_001E       6
S1701_C03_001M       0
state                0
county               0
tract                0
GEOID                0
S1701_C01_001_SE     0
S1701_C01_001_CV    81
S1701_C02_001_SE     0
S1701_C02_001_CV    87
S1701_C03_001_SE     0
S1701_C03_001_CV     6
dtype: int64</code></pre>
</div>
</div>
<div id="cell-30" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>florida_tracts.hist(bins<span class="op">=</span><span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>array([[&lt;Axes: title={'center': 'S1701_C01_001E'}&gt;,
        &lt;Axes: title={'center': 'S1701_C01_001M'}&gt;,
        &lt;Axes: title={'center': 'S1701_C02_001E'}&gt;],
       [&lt;Axes: title={'center': 'S1701_C02_001M'}&gt;,
        &lt;Axes: title={'center': 'S1701_C03_001E'}&gt;,
        &lt;Axes: title={'center': 'S1701_C03_001M'}&gt;],
       [&lt;Axes: title={'center': 'S1701_C01_001_SE'}&gt;,
        &lt;Axes: title={'center': 'S1701_C01_001_CV'}&gt;,
        &lt;Axes: title={'center': 'S1701_C02_001_SE'}&gt;],
       [&lt;Axes: title={'center': 'S1701_C02_001_CV'}&gt;,
        &lt;Axes: title={'center': 'S1701_C03_001_SE'}&gt;,
        &lt;Axes: title={'center': 'S1701_C03_001_CV'}&gt;]], dtype=object)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="mapping_uncertainty_files/figure-html/cell-19-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="task-4-categorize-census-tracts-according-to-data-quality-as-indicated-by-cvs" class="level2">
<h2 class="anchored" data-anchor-id="task-4-categorize-census-tracts-according-to-data-quality-as-indicated-by-cvs">Task 4: Categorize Census Tracts According to Data Quality as Indicated by CVs <a class="anchor" id="chapter4"></a></h2>
<div id="cell-32" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">vars</span>:</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    conditions <span class="op">=</span> [</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        (florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_CV"</span>] <span class="op">&lt;</span> <span class="dv">0</span>),</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        (florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_CV"</span>] <span class="op">&lt;</span> <span class="dv">12</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        (florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_CV"</span>] <span class="op">&lt;</span> <span class="dv">40</span>),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        (florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_CV"</span>] <span class="op">&gt;=</span> <span class="dv">40</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define choices corresponding to each condition</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    choices <span class="op">=</span> [<span class="st">"No CV"</span>, <span class="st">"High"</span>, <span class="st">"Medium"</span>, <span class="st">"Low"</span>]</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use np.select to apply conditions and choices to the dataframe</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    florida_tracts[<span class="ss">f"</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">_rating"</span>] <span class="op">=</span> np.select(conditions, choices, default<span class="op">=</span>np.nan)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>florida_tracts.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">S1701_C01_001E</th>
<th data-quarto-table-cell-role="th">S1701_C01_001M</th>
<th data-quarto-table-cell-role="th">S1701_C02_001E</th>
<th data-quarto-table-cell-role="th">S1701_C02_001M</th>
<th data-quarto-table-cell-role="th">S1701_C03_001E</th>
<th data-quarto-table-cell-role="th">S1701_C03_001M</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">S1701_C01_001_SE</th>
<th data-quarto-table-cell-role="th">S1701_C01_001_CV</th>
<th data-quarto-table-cell-role="th">S1701_C02_001_SE</th>
<th data-quarto-table-cell-role="th">S1701_C02_001_CV</th>
<th data-quarto-table-cell-role="th">S1701_C03_001_SE</th>
<th data-quarto-table-cell-role="th">S1701_C03_001_CV</th>
<th data-quarto-table-cell-role="th">S1701_C01_001_rating</th>
<th data-quarto-table-cell-role="th">S1701_C02_001_rating</th>
<th data-quarto-table-cell-role="th">S1701_C03_001_rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2504.0</td>
<td>240.0</td>
<td>224.0</td>
<td>107.0</td>
<td>8.9</td>
<td>4.4</td>
<td>12</td>
<td>071</td>
<td>001701</td>
<td>12071001701</td>
<td>145.896657</td>
<td>5.826544</td>
<td>65.045593</td>
<td>29.038211</td>
<td>2.674772</td>
<td>30.053618</td>
<td>High</td>
<td>Medium</td>
<td>Medium</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6075.0</td>
<td>590.0</td>
<td>227.0</td>
<td>210.0</td>
<td>3.7</td>
<td>3.4</td>
<td>12</td>
<td>071</td>
<td>010303</td>
<td>12071010303</td>
<td>358.662614</td>
<td>5.903911</td>
<td>127.659574</td>
<td>56.237698</td>
<td>2.066869</td>
<td>55.861332</td>
<td>High</td>
<td>Low</td>
<td>Low</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>7342.0</td>
<td>1045.0</td>
<td>1603.0</td>
<td>772.0</td>
<td>21.8</td>
<td>9.4</td>
<td>12</td>
<td>071</td>
<td>010307</td>
<td>12071010307</td>
<td>635.258359</td>
<td>8.652388</td>
<td>469.300912</td>
<td>29.276414</td>
<td>5.714286</td>
<td>26.212320</td>
<td>High</td>
<td>Medium</td>
<td>Medium</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>9873.0</td>
<td>788.0</td>
<td>1548.0</td>
<td>617.0</td>
<td>15.7</td>
<td>6.1</td>
<td>12</td>
<td>071</td>
<td>010103</td>
<td>12071010103</td>
<td>479.027356</td>
<td>4.851893</td>
<td>375.075988</td>
<td>24.229715</td>
<td>3.708207</td>
<td>23.619151</td>
<td>High</td>
<td>Medium</td>
<td>Medium</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4549.0</td>
<td>727.0</td>
<td>757.0</td>
<td>426.0</td>
<td>16.6</td>
<td>8.7</td>
<td>12</td>
<td>071</td>
<td>001801</td>
<td>12071001801</td>
<td>441.945289</td>
<td>9.715218</td>
<td>258.966565</td>
<td>34.209586</td>
<td>5.288754</td>
<td>31.859963</td>
<td>High</td>
<td>Medium</td>
<td>Medium</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-33" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>florida_tracts.to_csv(<span class="st">'florida_tracts.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="task-5-join-the-file-to-the-florida-tracts-geometry" class="level2">
<h2 class="anchored" data-anchor-id="task-5-join-the-file-to-the-florida-tracts-geometry">Task 5: Join the File to the Florida Tracts Geometry <a class="anchor" id="chapter5"></a></h2>
<div id="cell-36" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>acs.geographies[<span class="st">'fips'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">geoLevelDisplay</th>
<th data-quarto-table-cell-role="th">referenceDate</th>
<th data-quarto-table-cell-role="th">requires</th>
<th data-quarto-table-cell-role="th">wildcard</th>
<th data-quarto-table-cell-role="th">optionalWithWCFor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>us</td>
<td>010</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>region</td>
<td>020</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>division</td>
<td>030</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>state</td>
<td>040</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>county</td>
<td>050</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>[state]</td>
<td>state</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>county subdivision</td>
<td>060</td>
<td>2016-01-01</td>
<td>[state, county]</td>
<td>[county]</td>
<td>county</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>subminor civil division</td>
<td>067</td>
<td>2016-01-01</td>
<td>[state, county, county subdivision]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>tract</td>
<td>140</td>
<td>2016-01-01</td>
<td>[state, county]</td>
<td>[county]</td>
<td>county</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>place</td>
<td>160</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>[state]</td>
<td>state</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>consolidated city</td>
<td>170</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>[state]</td>
<td>state</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>alaska native regional corporation</td>
<td>230</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>[state]</td>
<td>state</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>american indian area/alaska native area/hawaiian home land</td>
<td>250</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>american indian tribal subdivision</td>
<td>251</td>
<td>2016-01-01</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>american indian area/alaska native area/hawaiian home land</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>american indian area/alaska native area (reservation or statistical entity only)</td>
<td>252</td>
<td>2016-01-01</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>american indian area/alaska native area/hawaiian home land</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>american indian area (off-reservation trust land only)/hawaiian home land</td>
<td>254</td>
<td>2016-01-01</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>american indian area/alaska native area/hawaiian home land</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>tribal census tract</td>
<td>256</td>
<td>2016-01-01</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>state (or part)</td>
<td>260</td>
<td>2016-01-01</td>
<td>[american indian area/alaska native area/hawaiian home land]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>metropolitan statistical area/micropolitan statistical area</td>
<td>310</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>principal city (or part)</td>
<td>312</td>
<td>2016-01-01</td>
<td>[metropolitan statistical area/micropolitan statistical area, state (or part)]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>metropolitan division</td>
<td>314</td>
<td>2016-01-01</td>
<td>[metropolitan statistical area/micropolitan statistical area]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>combined statistical area</td>
<td>330</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>combined new england city and town area</td>
<td>335</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>new england city and town area</td>
<td>350</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>principal city</td>
<td>352</td>
<td>2016-01-01</td>
<td>[new england city and town area, state (or part)]</td>
<td>[state (or part)]</td>
<td>state (or part)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>necta division</td>
<td>355</td>
<td>2016-01-01</td>
<td>[new england city and town area]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>urban area</td>
<td>400</td>
<td>2016-01-01</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>congressional district</td>
<td>500</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>[state]</td>
<td>state</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>state legislative district (upper chamber)</td>
<td>610</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>state legislative district (lower chamber)</td>
<td>620</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>public use microdata area</td>
<td>795</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>[state]</td>
<td>state</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>zip code tabulation area</td>
<td>860</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>[state]</td>
<td>state</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>school district (elementary)</td>
<td>950</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">32</td>
<td>school district (secondary)</td>
<td>960</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>school district (unified)</td>
<td>970</td>
<td>2016-01-01</td>
<td>[state]</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-37" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>counties <span class="op">=</span> cenpy.explorer.fips_table(<span class="st">"COUNTY"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>counties.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
<th data-quarto-table-cell-role="th">3</th>
<th data-quarto-table-cell-role="th">4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>AL</td>
<td>1</td>
<td>1</td>
<td>Autauga County</td>
<td>H1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>AL</td>
<td>1</td>
<td>3</td>
<td>Baldwin County</td>
<td>H1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>AL</td>
<td>1</td>
<td>5</td>
<td>Barbour County</td>
<td>H1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>AL</td>
<td>1</td>
<td>7</td>
<td>Bibb County</td>
<td>H1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>AL</td>
<td>1</td>
<td>9</td>
<td>Blount County</td>
<td>H1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cell-38" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pygris</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-39" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>pygris.tracts?</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Signature:
pygris.tracts(
    state=None,
    county=None,
    cb=False,
    year=None,
    cache=False,
    subset_by=None,
)
Docstring:
 Load a Census tracts shapefile into Python as a GeoDataFrame

Parameters
----------
state : str 
    The state name, state abbreviation, or two-digit FIPS code of the desired state. 
    If None, Census tracts for the entire United States will be downloaded if available for that 
    year / dataset combination.  
county : str
    The county name or three-digit FIPS code of the desired county. If None, Census tracts
    for the selected state will be downloaded. 
cb : bool 
    If set to True, download a generalized (1:500k) cartographic boundary file.  
    Defaults to False (the regular TIGER/Line file).
year : int 
    The year of the TIGER/Line or cartographic boundary shapefile. 
cache : bool 
    If True, the function will download a Census shapefile to a cache directory 
    on the user's computer for future access.  If False, the function will load
    the shapefile directly from the Census website.      
subset_by : tuple, int, slice, dict, geopandas.GeoDataFrame, or geopandas.GeoSeries
    An optional directive telling pygris to return a subset of data using 
    underlying arguments in geopandas.read_file().  
    subset_by operates as follows:
        * If a user supplies a tuple of format (minx, miny, maxx, maxy), 
        it will be interpreted as a bounding box and rows will be returned
        that intersect that bounding box;
        * If a user supplies a integer or a slice object, the first n rows
        (or the rows defined by the slice object) will be returned;
        * If a user supplies an object of type geopandas.GeoDataFrame
        or of type geopandas.GeoSeries, rows that intersect the input 
        object will be returned. CRS misalignment will be resolved 
        internally.  
        * A dict of format {"address": "buffer_distance"} will return rows
        that intersect a buffer of a given distance (in meters) around an 
        input address.  

Returns
----------
geopandas.GeoDataFrame: A GeoDataFrame of Census tracts.


Notes
----------
See https://www2.census.gov/geo/pdfs/reference/GARM/Ch10GARM.pdf for more information.    
File:      ~/anaconda3/envs/eda/lib/python3.12/site-packages/pygris/enumeration_units.py
Type:      function</code></pre>
</div>
</div>
<div id="cell-40" class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>fl_tracts_geo<span class="op">=</span>pygris.tracts(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    state<span class="op">=</span><span class="st">"FL"</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    year<span class="op">=</span><span class="dv">2016</span>,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>fl_tracts_geo.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Using FIPS code '12' for input 'FL'</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="mapping_uncertainty_files/figure-html/cell-27-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-41" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(fl_tracts_geo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="82">
<pre><code>4245</code></pre>
</div>
</div>
<div id="cell-42" class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>fl_tracts_geo.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'geopandas.geodataframe.GeoDataFrame'&gt;
RangeIndex: 4245 entries, 0 to 4244
Data columns (total 13 columns):
 #   Column    Non-Null Count  Dtype   
---  ------    --------------  -----   
 0   STATEFP   4245 non-null   object  
 1   COUNTYFP  4245 non-null   object  
 2   TRACTCE   4245 non-null   object  
 3   GEOID     4245 non-null   object  
 4   NAME      4245 non-null   object  
 5   NAMELSAD  4245 non-null   object  
 6   MTFCC     4245 non-null   object  
 7   FUNCSTAT  4245 non-null   object  
 8   ALAND     4245 non-null   int64   
 9   AWATER    4245 non-null   int64   
 10  INTPTLAT  4245 non-null   object  
 11  INTPTLON  4245 non-null   object  
 12  geometry  4245 non-null   geometry
dtypes: geometry(1), int64(2), object(10)
memory usage: 431.3+ KB</code></pre>
</div>
</div>
</section>
<section id="task-6-merge-the-demographic-data-with-geometries" class="level2">
<h2 class="anchored" data-anchor-id="task-6-merge-the-demographic-data-with-geometries">Task 6: Merge the demographic data with geometries <a class="anchor" id="chapter6"></a></h2>
<div id="cell-44" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>florida_demo_final<span class="op">=</span>fl_tracts_geo.merge(</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    florida_tracts, </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    on<span class="op">=</span><span class="st">'GEOID'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-45" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>florida_demo_final.plot(column<span class="op">=</span><span class="st">'S1701_C01_001E'</span>, legend<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="mapping_uncertainty_files/figure-html/cell-31-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="task-7-map-the-poverty-rate-data-and-include-data-quality-as-indicated-by-cvs" class="level2">
<h2 class="anchored" data-anchor-id="task-7-map-the-poverty-rate-data-and-include-data-quality-as-indicated-by-cvs">Task 7: Map the Poverty Rate Data and Include Data Quality as Indicated by CVs <a class="anchor" id="chapter7"></a></h2>
<p>For this visualization, we’ll focus on mapping the poverty rate using a graduated color scheme based on S1701_C01_001E and overlaying this with hatched patterns based on S1701_C01_001_rating to indicate data quality.</p>
<p>We’ll adjust transparency as needed to make both layers visible and interpretable.</p>
<div id="cell-48" class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>florida_demo_final.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'geopandas.geodataframe.GeoDataFrame'&gt;
RangeIndex: 4245 entries, 0 to 4244
Data columns (total 31 columns):
 #   Column                Non-Null Count  Dtype   
---  ------                --------------  -----   
 0   STATEFP               4245 non-null   object  
 1   COUNTYFP              4245 non-null   object  
 2   TRACTCE               4245 non-null   object  
 3   GEOID                 4245 non-null   object  
 4   NAME                  4245 non-null   object  
 5   NAMELSAD              4245 non-null   object  
 6   MTFCC                 4245 non-null   object  
 7   FUNCSTAT              4245 non-null   object  
 8   ALAND                 4245 non-null   int64   
 9   AWATER                4245 non-null   int64   
 10  INTPTLAT              4245 non-null   object  
 11  INTPTLON              4245 non-null   object  
 12  geometry              4245 non-null   geometry
 13  S1701_C01_001E        4164 non-null   float64 
 14  S1701_C01_001M        4245 non-null   float64 
 15  S1701_C02_001E        4158 non-null   float64 
 16  S1701_C02_001M        4245 non-null   float64 
 17  S1701_C03_001E        4239 non-null   float64 
 18  S1701_C03_001M        4245 non-null   float64 
 19  state                 4245 non-null   object  
 20  county                4245 non-null   object  
 21  tract                 4245 non-null   object  
 22  S1701_C01_001_SE      4245 non-null   float64 
 23  S1701_C01_001_CV      4164 non-null   float64 
 24  S1701_C02_001_SE      4245 non-null   float64 
 25  S1701_C02_001_CV      4158 non-null   float64 
 26  S1701_C03_001_SE      4245 non-null   float64 
 27  S1701_C03_001_CV      4239 non-null   float64 
 28  S1701_C01_001_rating  4245 non-null   object  
 29  S1701_C02_001_rating  4245 non-null   object  
 30  S1701_C03_001_rating  4245 non-null   object  
dtypes: float64(12), geometry(1), int64(2), object(16)
memory usage: 1.0+ MB</code></pre>
</div>
</div>
<ul>
<li>S1701_C01_001E: poverty ref population estimate</li>
<li>S1701_C02_001E: poverty population estimate</li>
<li>S1701_C03_001E: percentage of poverty population estimate</li>
</ul>
<div id="cell-50" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># florida_demo_final.explore(column="S1701_C01_001E", tiles="CartoDB positron")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="step-1-visualize-poverty-rates" class="level3">
<h3 class="anchored" data-anchor-id="step-1-visualize-poverty-rates">Step 1: Visualize Poverty Rates</h3>
<p>First, we’ll plot the poverty rates with a graduated color scheme. Since we want a red color scheme, we’ll use a colormap ranging from light to dark red to represent increasing poverty rates. We’ll make this layer less transparent to keep it visible under the data quality overlay.</p>
<div id="cell-52" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.colors <span class="im">as</span> colors</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Plot poverty rates</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>florida_demo_final.plot(column<span class="op">=</span><span class="st">'S1701_C01_001E'</span>, ax<span class="op">=</span>ax, legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>                        legend_kwds<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">"Poverty Rate (%)"</span>, <span class="st">'orientation'</span>: <span class="st">"horizontal"</span>},</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>                        cmap<span class="op">=</span><span class="st">'Reds'</span>, scheme<span class="op">=</span><span class="st">'NaturalBreaks'</span>, k<span class="op">=</span><span class="dv">6</span>, edgecolor<span class="op">=</span><span class="st">'none'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust as necessary for your dataset and preferences</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Florida Poverty Rates &amp; Data Quality'</span>)</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for Step 2: This will involve plotting the data quality overlay</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="co"># This step will be added after explaining the logic for data quality visualization</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>TypeError: Legend.__init__() got an unexpected keyword argument 'label'</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="mapping_uncertainty_files/figure-html/cell-34-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="step-2-overlay-data-quality-information" class="level3">
<h3 class="anchored" data-anchor-id="step-2-overlay-data-quality-information">Step 2: Overlay Data Quality Information</h3>
<p>Next, we’ll add the data quality overlay. For this, we’ll categorize the tracts based on their S1701_C01_001_rating and use hatched fills to indicate the quality. Different hatch patterns (or colors) will be used for “High”, “Medium”, “Low”, and “No CV” categories. This layer will be more transparent so the poverty rates underneath are still visible.</p>
<div id="cell-54" class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>florida_demo_final[<span class="st">'S1701_C01_001_rating'</span>] <span class="op">=</span> florida_demo_final[<span class="st">'S1701_C01_001_rating'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>florida_demo_final[<span class="st">'S1701_C01_001_rating'</span>].cat.set_categories([<span class="st">'High'</span>, <span class="st">'Medium'</span>, <span class="st">'Low'</span>, <span class="st">'No CV'</span>], ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>florida_demo_final.plot(column<span class="op">=</span><span class="st">'S1701_C01_001E'</span>, ax<span class="op">=</span>ax, legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># legend_kwds={'label': "Poverty Rate (%)", 'orientation': "horizontal"},</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>                        cmap<span class="op">=</span><span class="st">'Reds'</span>, scheme<span class="op">=</span><span class="st">'NaturalBreaks'</span>, k<span class="op">=</span><span class="dv">6</span>, edgecolor<span class="op">=</span><span class="st">'none'</span>)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Overlap with color intensity for uncertainty</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>florida_demo_final.plot(column<span class="op">=</span><span class="st">'S1701_C01_001_rating'</span>, ax<span class="op">=</span>ax, legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>                        cmap<span class="op">=</span><span class="st">'Greys'</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, edgecolor<span class="op">=</span><span class="st">'none'</span>)  <span class="co"># Using greyscale for simplicity</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="mapping_uncertainty_files/figure-html/cell-35-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/gigisung0503\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© CC-Gigi Sung, 2024</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/gigisung0503/gigisung0503.github.io.git/blob/main/Work in Progress/mapping_uncertainty.ipynb" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>All rights reserved. 2024.</p>
</div>
  </div>
</footer>




</body></html>